% !TEX encoding = UTF-8 Unicode
% !TEX TS-program = pdflatex

\documentclass[handout]{beamer}

\input{aulas-beamer-preamble}
\usepackage{xcolor}
\usepackage{ulem}
\usepackage{tikz-uml}


\title[Programação Modular]
{%
	Relacionamento entre classes: Associação, Agregação e Composição
}

\author[Prof. Pedro Pongelupe]
{
	Prof.~Pedro Pongelupe
}
\institute[DCC / PUC Minas]
{\epsfig{file=puclogo_small_bw,width=1.5cm} \\
  \textsc{Pontifícia Universidade Católica de Minas Gerais}\\
	Departamento de Ciência da Computação
}
\date[]{}

\lstset{language=Java,
   basicstyle=\scriptsize,
   commentstyle=\color{red},
   showstringspaces=false,
   numbers=none,
   numberstyle=\tiny}

\begin{document}


\selectlanguage{brazil}

\begin{frame}
   \titlepage
\end{frame}

%\addtobeamertemplate{frametitle}{}{%
%	\begin{tikzpicture}[remember picture,overlay]
%	\node[anchor=north east,yshift=2pt] at (current page.north east) {\epsfig{file=puclogo_small_bw,width=1.2cm}};
%	\end{tikzpicture}}


%\addtobeamertemplate{frametitle}{}{%
	%\begin{tikzpicture}[node distance=0cm, remember picture, overlay, every node/.style={inner sep=0,outer sep=0, node distance=0cm, baseline=0cm}]
	%\node[anchor=north east] at (current page.north east) {\epsfig{file=puclogo_small_bw,width=1cm}};
	%\end{tikzpicture}}


%\logo{\includegraphics[height=0.8cm]{puclogo_small_bw.pdf}\vspace{220pt}}


\begin{frame}
   \frametitle{Sumário}
   \tableofcontents[pausesections]
\end{frame}

%\AtBeginSection[] % Do nothing for \section*
%{
%\begin{frame}<beamer>
%\frametitle{Outline}
%\tableofcontents[currentsection]
%\end{frame}}


\addtobeamertemplate{frametitle}{}{%
   \begin{textblock*}{10mm}(.9945\textwidth,-1.72cm)
	   \includegraphics[height=1cm]{puclogo_small_bw.pdf}
   \end{textblock*}
}

\section{Relacionamento entre objetos}


\begin{frame}{Uso e reuso: pensando em orientação por objetos}
        \begin{block}{Modularidade e Reusabilidade}
                Quando pensamos sistemas em módulos, intuitivamente, pensamos em reutilizar os módulos em várias partes do mesmo sistema ou em até vários sistemas.
        \end{block}
        \begin{itemize}
                \item Programar é uma atividade de repetição com pequenas modificações.
                \item Pensar em abordagens para construir um catálogo de componentes de software.
                \item Modularidade é a chave para atingir alto grau de reusabilidade.
                \item Reusabilidade é fundamental para reduzir custos e aumentar confiabilidade.
        \end{itemize}
\end{frame}
\begin{frame}{Objetos e relacionamentos}
        \begin{block}{Objetos não funcionam sozinhos!} 
                        \begin{itemize}
                                \item Usam/se comunicam com outros;
                                \item Contêm ou são formados por outros;
                                \item Programação Orientada por Objetos é baseada na \textbf{\underline{troca de mensagens}} entre os objetos. 
                        \end{itemize}
        \end{block}
\end{frame}
\begin{frame}{Relacionamentos entre objetos}
        \begin{itemize}
                \item \textbf{Associação}: objeto ``usa'' serviços de outro objeto.
                        \begin{itemize}
                                \item Mensagens disparam operações.
                                \item Operações (métodos) retornam resultados.
                        \end{itemize}
                \item \textbf{Agregação}: objeto definido em termos de seus componentes.
                        \begin{itemize}
                                \item relação parte/todo (``tem um'').
                        \end{itemize}
                \item \textbf{Composição}: relação ``está contido''.
                        \begin{itemize}
                                \item dependência de tempo de vida entre a parte e o todo.
                        \end{itemize}
        \end{itemize}
\end{frame}
\subsection{Associação}
\begin{frame}{Associação}
        \begin{block}{Principais características}
        \begin{itemize}
                \item Relacionamento denotado por  \textcolor{magenta}{``\underline{usa um}''}.
                \item Objetos são associados, mas não há relação de pertinência.
                        \begin{itemize}
                        \item Um \textcolor{cyan}{carro} \textcolor{magenta}{usa} uma \textcolor{cyan}{estrada}.
                        \item \textcolor{cyan}{Pessoas} \textcolor{magenta}{fazem} uma \textcolor{cyan}{festa}.
                        \item Vários \textcolor{cyan}{instrumentos} \textcolor{magenta}{são tocados} por uma \textcolor{cyan}{orquestra}.
                        \end{itemize}
        \end{itemize}
        \end{block}
\end{frame}
\begin{frame}{Associação}
    \begin{center}
    \begin{tikzpicture}
     \umlemptyclass{Aluno}
     \umlemptyclass[x=6]{Escola}
     \umluniassoc[mult1=*, mult2=1, name=estuda]{Aluno}{Escola}
     \node[above] at (estuda-1) {estuda};

    \end{tikzpicture} \\[15mm]
    \begin{tikzpicture}
     \umlemptyclass{Pessoa}
     \umlemptyclass[x=7]{Carro}
     \umlassoc[arg1=proprietario, mult1=1, arg2=frota, mult2=*, name=possuicar]{Aluno}{Carro}
    \end{tikzpicture}
\end{center}
\end{frame}

\begin{frame}{Classe de associação}
    \begin{center}
    \begin{tikzpicture}
     \umlemptyclass{Pessoa}
     \umlemptyclass[x=8]{Livro}
     \umlassoc[mult1=*, mult2=*, name=emp]{Pessoa}{Livro}
     \umlassocclass[x=4, y=-1.7, , anchor1=-130]{Emprestimo}{emp-1}{dtEmprest : Data \\ dtDevol : Data}{}
    \end{tikzpicture} \\[5mm]
    \begin{tikzpicture}
     \umlemptyclass{Pessoa}
     \umlclass[x=5]{Emprestimo}{dtEmprest : Data \\ dtDevol : Data}{}
     \umlemptyclass[x=9]{Livro}
     \umlassoc[mult2=*]{Pessoa}{Emprestimo}
     \umlassoc[mult1=*]{Emprestimo}{Livro}
    \end{tikzpicture}
\end{center}
\end{frame}

\subsection{Agregação}
\begin{frame}{Agregação}
        \begin{block}{Principais características}
        \begin{itemize}
                \item Relacionamento denotado por  \textcolor{magenta}{``\underline{tem/contém um}''}.
                \item Objetos definidos em termos dos seus componentes.
                \item \textbf{Tempos de vida independentes}.
                        \begin{itemize}
                        \item Um \textcolor{cyan}{computador} \textcolor{magenta}{tem} um \textcolor{cyan}{teclado}.
                        \item Um \textcolor{cyan}{time} \textcolor{magenta}{tem} vários \textcolor{cyan}{atletas}.
                        \item Um \textcolor{cyan}{automóvel} \textcolor{magenta}{contém} um \textcolor{cyan}{rádio}.
                        \end{itemize}
        \end{itemize}
        \end{block}
\end{frame}
\begin{frame}{Agregação}
        \begin{center}
                Representação gráfica: losango vazado (no lado \underline{todo})
        \end{center}
        \begin{center}
                \begin{tikzpicture}
                        \umlemptyclass{Time}
                        \umlemptyclass[x=6]{Atleta}
                        \umlaggreg[mult1=0..1, mult2=*]{Time}{Atleta}
                        \node[above] at (estuda-1) {tem};
                \end{tikzpicture} \\[15mm]

                \begin{tikzpicture}
                        \umlemptyclass{Professor}
                        \umlemptyclass[x=6]{Departamento}
                        \umlaggreg[mult1=1, mult2=*]{Departamento}{Professor}
                        \node[above] at (estuda-1) {possui};
                \end{tikzpicture} \\[15mm]
        \end{center}
\end{frame}

\subsection{Composição}
\begin{frame}{Composição}
        \begin{block}{Principais características}
                \begin{itemize}
                        \item Relacionamento denotado por  \textcolor{magenta}{``\underline{é formado por}''}.
                        \item Relacionamento \textbf{mais forte} que a agregação.
                        \item \textbf{Tempos de vida dependentes} - A existência da parte \textbf{não} faz sentido se o todo deixar de existir.
                                \begin{itemize}
                                        \item Um \textcolor{cyan}{livro} \textcolor{magenta}{é formado por} vários \textcolor{cyan}{capítulos}.
                                        \item Um \textcolor{cyan}{pedido} \textcolor{magenta}{é feito de} vários \textcolor{cyan}{itens}.
                                        \item Um \textcolor{cyan}{automóvel} \textcolor{magenta}{contém} um \textcolor{cyan}{motor} e \textcolor{cyan}{portas}.
                                \end{itemize}
                \end{itemize}
        \end{block}
\end{frame}
\begin{frame}{Composição}
        \begin{center}
                Representação gráfica: losango preenchido (no lado \underline{todo})
        \end{center}
        \begin{center}
                \begin{tikzpicture}
                        \umlclass{Pedido}{-- id \\ -- data \\ -- desconto}{}
                        \umlclass[x=6]{ItemPedido}{-- id \\ -- descricao \\ -- quantidade \\ -- valorUnitario}{}
                        \umlcompo[mult1=1, mult2=1..*]{Pedido}{ItemPedido}
                \end{tikzpicture}
                \\
                \begin{tikzpicture}
                        \umlemptyclass{Carro}
                        \umlemptyclass[x=6]{Motor}
                        \umlcompo[mult1=1, mult2=1]{Carro}{Motor}
                \end{tikzpicture}
        \end{center}
\end{frame}

\subsection{Agregação x Composição}
\begin{frame}{Agregação x composição}
\begin{itemize}
    \item \textbf{Agregação}: a existência da ``parte'' faz sentido, mesmo não existindo ``todo''.
        \begin{itemize}
            \item partes podem eventualmente pertencer a mais de um todo (não simultaneamente).
            \item Ex: Atleta $\longrightarrow$ Time\\[2mm]
        \end{itemize}
    \item \textbf{Composição}: relacionamento mais forte. A existência da parte \textit{\textbf{não}} faz sentido se o todo não existir.
        \begin{itemize}
            \item as partes não podem ser compartilhadas.
            \item Ex: Itens $\longrightarrow$ Pedido \\[2mm]
        \end{itemize}
    \item Relacionamentos do tipo ``composição'' indicam que se apaguem os objetos associados quando o todo for destruído/finalizado.
\end{itemize}
\end{frame}
\begin{frame}{Exemplo de agregação e composição}
    \begin{center}
    Agregação \\
    \begin{tikzpicture}
     \umlclass{Time}{-- nome \\ -- tecnico}{}
     \umlclass[x=5]{Atleta}{-- nome \\ -- idade \\ -- numCamisa}{}
     \umlaggreg[mult1=0..1, mult2=*]{Time}{Atleta}
    \end{tikzpicture} \\
    Composição \\
    \begin{tikzpicture}
     \umlclass{Pedido}{-- id \\ -- data \\ -- desconto}{}
     \umlclass[x=6]{ItemPedido}{-- id \\ -- descricao \\ -- quantidade \\ -- valorUnitario}{}
     \umlcompo[mult1=1, mult2=1..*]{Pedido}{ItemPedido}
    \end{tikzpicture}
\end{center}
\end{frame}

\begin{frame}{Exemplo de agregação e composição}
    \begin{center}
    \begin{tikzpicture}
     \umlclass{Rádio}{}{}
     \umlclass[y=-1.5]{Motor}{}{}
     \umlclass[x=6]{Carro}{}{}
     \umlaggreg[mult1=1, mult2=1]{Rádio}{Carro}
     \umlcompo[mult1=1, mult2=1, geometry=|-]{Carro}{Motor}
    \end{tikzpicture}
\end{center}
\end{frame}

\begin{frame}[fragile]{Obrigado!!}
        Muito obrigado pela atenção! Alguma dúvida? Bora praticar!!!
        \begin{block}{  }
                "\textit{O conhecimento nos faz responsáveis.}"
        \end{block}
\end{frame}
\end{document}
