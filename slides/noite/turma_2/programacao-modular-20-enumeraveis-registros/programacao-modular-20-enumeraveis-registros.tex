\documentclass[handout]{beamer}

\input{aulas-beamer-preamble}


\title[Programação Modular]
{%
    Tipos Enumeráveis e Registros%
}
\author[Prof. Pedro Pongelupe]
{
    Prof.~Pedro~Pongelupe
}
\institute[DCC / PUC Minas]
{\includegraphics[width=4cm]{puc_engesoft_logo.png} \\
	\textsc{Pontifícia Universidade Católica de Minas Gerais}\\
	Curso de Engenharia de Software
}
%\institute[DCC / PUC Minas]
%{\epsfig{file=puclogo_small_bw,width=1.5cm} \\
%	\textsc{Pontifícia Universidade Católica de Minas Gerais}\\
%	Departamento de Ciência da Computação
%}
\date[]{}

\lstset{language=Java,
   basicstyle=\scriptsize,
   commentstyle=\color{red},
   showstringspaces=false,
   numbers=none,
   numberstyle=\tiny}

\begin{document}


\selectlanguage{brazil}

\begin{frame}
   \titlepage
\end{frame}

%\addtobeamertemplate{frametitle}{}{%
%    \begin{tikzpicture}[remember picture,overlay]
%    \node[anchor=north east,yshift=2pt] at (current page.north east) {\epsfig{file=puclogo_small_bw,width=1.2cm}};
%    \end{tikzpicture}}


%\addtobeamertemplate{frametitle}{}{%
    %\begin{tikzpicture}[node distance=0cm, remember picture, overlay, every node/.style={inner sep=0,outer sep=0, node distance=0cm, baseline=0cm}]
    %\node[anchor=north east] at (current page.north east) {\epsfig{file=puclogo_small_bw,width=1cm}};
    %\end{tikzpicture}}


%\logo{\includegraphics[height=0.8cm]{puclogo_small_bw.pdf}\vspace{220pt}}


\begin{frame}
   \frametitle{Sumário}
   \tableofcontents[pausesections]
\end{frame}

%\AtBeginSection[] % Do nothing for \section*
%{
%\begin{frame}<beamer>
%\frametitle{Outline}
%\tableofcontents[currentsection]
%\end{frame}}


\addtobeamertemplate{frametitle}{}{%
	\begin{textblock*}{10mm}(.8785\textwidth,-1.75cm)
		\includegraphics[height=0.97cm]{puc_engesoft_logo.png}%\includegraphics[height=1cm]{puclogo_small_bw.pdf}
	\end{textblock*}
}
%\addtobeamertemplate{frametitle}{}{%
%   \begin{textblock*}{10mm}(.9945\textwidth,-1.71cm)
%    \includegraphics[height=1cm]{puclogo_small_bw.pdf}
%   \end{textblock*}
%}

\section{Tipos Enumeráveis}
\subsection{Definição}

\begin{frame}[fragile]{Tipos Enumeráveis}
    \begin{block}{O quê são?}
        Os tipos enumeráveis, ou enums, são um tipo especial de dados que permitem que uma variável seja parte de um conjunto predefinido de constantes. 
    \end{block}
    \begin{itemize}
        \item Por ser constante, o nome de um enum deve ser escrito em letras maiúsculas.
    \end{itemize}
    \begin{block}{Exemplo}
        \begin{lstlisting}
    public enum DiaSemana {
        DOMINGO, SEGUNDA, TERCA, QUARTA, QUINTA, SEXTA, SABADO;
    }
        \end{lstlisting}
    \end{block}

\end{frame}


\begin{frame}[fragile]{Tipos Enumeráveis}
    \begin{block}{Quando usar?}
        É recomendado utilizar enuns quando precisamos representar um conjunto \textbf{fixo} de constantes.
        Por exemplo:
    \begin{itemize}
        \item Planetas do Sistema Solar
        \item Itens de um menu
        \item Comandos possíveis de um sistema
    \end{itemize}
    \end{block}

\end{frame}

\begin{frame}[fragile]{Tipos Enumeráveis}
    \begin{block}{Propriedades de Enums}
    \begin{itemize}
        \item Podem possuir atributos  
        \item Podem possuir métodos  
        \item Todos estendem \textit{implicitamente} de \lstinline|java.lang.Enum|, logo, um enum não pode estender outra classe em Java.
        \item Os construtores de um enum devem ser \textbf{private} ou \textbf{package-private (default)}. 
        \item Podemos acessar todos os elementos de um enum estaticamente como: <Enum>.values(). ex. DiaSemana.values() 
    \end{itemize}
    \end{block}

\end{frame}

\subsection{Exemplo}
\begin{frame}[fragile]{Exemplo Dia Semana}
        \begin{lstlisting}
    public enum DiaSemana {
        DOMINGO(true), SEGUNDA, TERCA, QUARTA, 
        QUINTA, SEXTA, SABADO(true);
        
        private final boolean isFinalDeSemana;

        private DiaSemana(boolean isFinalDeSemana) { 
            this.isFinalDeSemana = isFinalDeSemana; 
        }
        private DiaSemana() {
            this(false);
        }
        
        public boolean isFinalDeSemana() { return isFinalDeSemana; }
        public boolean isDiaDeSemana() { return !isFinalDeSemana; }

    }
        \end{lstlisting}

\end{frame}

\begin{frame}[fragile]{Exemplo Dia Semana}
        \begin{lstlisting}
public class Driver {
    public static void main(String[] args) {
        List.of(DiaSemana.values())
            .stream()
            .filter(DiaSemana::isFinalDeSemana)
            .forEach(System.out::println);
    }        
}
        \end{lstlisting}

\end{frame}

\subsection{UML}
\begin{frame}[fragile]{UML Enum}
    \begin{tikzpicture}
        \umlclass[type=enumeration]{DiaSemana}{DOMINGO, SEGUNDA, TERCA, QUARTA, \\QUINTA, SEXTA, SABADO \\ -- isFinalDeSemana: boolean}{+ isFinalDeSemana(): boolean \\ + isDiaDeSemana(): boolean}
    \end{tikzpicture}
\end{frame}


\section{Registros}

\subsection{Definição}
\begin{frame}[fragile]{Registros}
    \begin{block}{O quê são?}
        Os registros, ou records, são um tipo especial de dados que funcionam como transportadores transparentes de dados imutáveis. Descrito pela \href{https://openjdk.org/jeps/395}{JEP-395} da release 16 do Java.
    \end{block}
    Um registro em Java define um cabeçalho com as seguintes informações:
    \begin{itemize}
        \item Métodos de acesso apropriados (getter)
        \item Construtor
        \item equals
        \item hashCode
        \item toString
    \end{itemize}

\end{frame}


\subsection{Record vs Java Class}
\begin{frame}[fragile]{Java Class}
        \begin{lstlisting}
public final class Rectangle {
    private final double length;
    private final double width;

    public Rectangle(double length, double width) {
        this.length = length;
        this.width = width;
    }

    double length() { return this.length; }
    double width()  { return this.width; }

    @Override
    public boolean equals(Object obj) {...}

    @Override
    public int hashCode() {...}

    @Override
    public String toString() {...}
}
        \end{lstlisting}
\end{frame}
\begin{frame}[fragile]{Record}
        \begin{lstlisting}
        record Rectangle(double length, double width) { }
        \end{lstlisting}
\end{frame}


\subsection{Utilização de Record}
\begin{frame}[fragile]{Instanciando um novo Record}
Os records representam um tipo especial de classes em Java. Para criar um nova instância de um record, utilizamos a 
palavra chave new.
        \begin{lstlisting}
        record Rectangle(double length, double width) { }
        ...
        Rectangle r = new Rectangle(4,5);
        \end{lstlisting}
\end{frame}

\begin{frame}[fragile]{Registros}
    \begin{block}{Restrições}
    \begin{itemize}
        \item Não é possível uma classe explicitamente estender um registro. 
    \end{itemize}
    \end{block}
    \begin{block}{Possibilidades}
    \begin{itemize}
        \item É possível criar um registro genérico \\ 
        \lstinline|record Triangulo<C extends Coordenada> (C topo, C esquerda, C direita) { }|
        \item Um registro pode implementar uma ou mais interfaces\\
        \lstinline|record Aluno(...) implements Matriculavel { }|
        \item Um registro pode ser definido como um membro interno de uma classe
    \end{itemize}
    \end{block}

\end{frame}

\begin{frame}[fragile]{Record como membro de uma classe}
        \begin{lstlisting}
public class Driver {
        private record Suco(String fruta, int quantidadeAgua) {}

        public static void main(String[] args) {
            var sucoMelancia = new Suco("melancia", 500);
            var sucoLimao = new Suco("Limao", 1500);
            System.out.println("Total Suco: " 
               + (sucoMelancia.quantidadeAgua() 
                + sucoLimao.quantidadeAgua()));
        }
}
        \end{lstlisting}
\end{frame}

\begin{frame}[fragile]{Obrigado!!}
        Muito obrigado pela atenção! Alguma dúvida? Bora praticar!!!
        \begin{block}{  }
                "\textit{Nada de desgosto, nem de desânimo; se acabas de fracassar, recomeça. "}
        \end{block}
\end{frame}
\end{document}
